@using AppData.Models;
@model List<BillDetails>


@{
    ViewData["Title"] = "Bill Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";

    String dh0 = "Giao thành công";
    String dh1 = "Yêu cầu hủy";
    String dh2 = "Chấp nhận hủy";
    String dh3 = "Hủy thành công";
    String dh4 = "Yêu cầu bảo hành";
    String dh5 = "Xác nhận bảo hành";
}

<table class="table table-bordered container">
    <thead>
        <tr>
            <td colspan="5" style="text-align:center">Bill Detail</td>
        </tr>
        <tr>
            <th>
                Phone Name
            </th>
            <th>
                Price
            </th>
            <th>
                Status
            </th>
        </tr>

    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @item.PhoneDetaild.Phones.PhoneName |
                    @item.PhoneDetaild.Rams.Name/@item.PhoneDetaild.Roms.Name |
                    @item.PhoneDetaild.Colors.Name (#imei:@item.Imei)
                </td>
                <td>
                    @string.Format("{0:0,0}", item.Price) vnđ
                </td>
                <td>
                    @if (item.Status == 0)
                    {
                        @*<p class="text-success"> @dh0</p>*@
                    }
                    else if (item.Status == 1)
                    {
                        <p class="text-danger"> @dh1</p>
                    }
                    else if (item.Status == 2)
                    {
                        <p class="text-danger"> @dh2</p>
                    }
                    else if (item.Status == 3)
                    {
                        <p class="text-danger"> @dh3</p>
                    }
                    else if (item.Status == 4)
                    {
                        <p class="text-success"> @dh4 (Lý do: @item.Note)</p>
                    }
                    else if (item.Status == 5)
                    {
                        <p class="text-success"> @dh5</p>
                    }
                </td>
                @* trường hợp đơn hàng giao thành công mới hiển thị Hoàn trả/Bảo hành*@

                @if (ViewBag.BillStatus == 4 && item.Status == 0)
                {
                    <td>
                        <a href="/Accounts/YeuCauTrahang?IdPhoneDetail=@item.IdPhoneDetail&phoneImei=@item.Imei">Hủy giao dịch</a>
                        <a> | </a>
                        @*<a href="/Accounts/YeuCauBaoHanh?IdPhoneDetail=@item.IdPhoneDetail&phoneImei=@item.Imei">Bảo Hành</a>*@
                        @*<a href="javascript:void(0);" onclick="alterAndSubmit('@item.IdPhoneDetail', '@item.Imei')">Bảo hành</a>*@
                        @Html.ActionLink("Bảo hành", "ThongTinBaoHanh", new {  id=item.Id })
                    </td>
                }
            </tr>
        }
    </tbody>
</table>

